{% extends "layout.html" %}

{% block title %}
    Register
{% endblock %}

{% block front %}


<div class="center-container">
    <div class="card">
        <h3>Register</h3>
        <p>Register with your email.</p>
        <form action="/register" method="post" id="registration-form">
        
            <div class="mb-3 input-group flex-nowrap">
                <span class="input-group-text" id="addon-wrapping"><i class="fa fa-id-card"></i></span>
                <input   class="form-control mx-auto w-auto" id="name" name="name" placeholder="Full Name" type="text">
            </div>
            <div class="mb-3 input-group flex-nowrap">
                <span class="input-group-text" id="addon-wrapping"><i class="fa fa-user"></i></span>
                <input autocomplete="off"  class="form-control mx-auto w-auto" id="username" name="username" placeholder="Username" type="text">
            </div>
            <div class="mb-3 input-group flex-nowrap">
                <span class="input-group-text" id="addon-wrapping"><i class="fa fa-envelope"></i></span>
                <input   class="form-control mx-auto w-auto" id="email" name="email" placeholder="Email" type="email">
            </div>
            
            <div class="mb-3 input-group flex-nowrap">
                <span class="input-group-text" id="addon-wrapping"><i class="fa fa-key"></i></span>
                <input class="form-control mx-auto w-auto" id="password" name="password" placeholder="Password" type="password">
            </div>
            <div class="mb-3 input-group flex-nowrap">
                <span class="input-group-text" id="addon-wrapping"><i class="fa fa-key"></i></span>
                <input class="form-control mx-auto w-auto" id="confirmation" name="confirmation" placeholder=" Confirm Password" type="password">
            </div>
            <p>Already have an account? <a href="/login">Login Here</a></p>
            <button class="btn btn-dark" type="submit">Register</button>
        </form>
    </div>
    
    
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {

    const regform = document.getElementById("registration-form");

    regform.addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent the form from submitting by default

        try {
            // Validate form fields here
            const name = document.getElementById("name").value;
            const username = document.getElementById("username").value;
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value; 
            const confirmation = document.getElementById("confirmation").value;

            // Example validation: Checking if the name field is empty
            if (name.trim() === "") {
                throw new Error("Full Name cannot be empty");
            }
            else if (username.trim() === "") {
                throw new Error("Username cannot be empty");
            }   
            else if (email.trim() === "") {
                throw new Error("Email cannot be empty");
            }
            else if (password.trim() === "") {
                throw new Error("Password cannot be empty");
            }
            else if (confirmation.trim() === "") {
                throw new Error("Confirmation cannot be empty");
            }
            else if (password !== confirmation) {
                throw new Error("Passwords do not match");
            }

            // If all validation passes, you can submit the form
            regform.submit();
        } catch (error) {
            alert(error.message);
        }
    });
});

</script>
    
{% endblock %}
